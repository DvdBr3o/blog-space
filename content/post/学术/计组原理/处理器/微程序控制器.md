---
title: 微程序控制器
date: 2025-12-14T21:46:21+08:00
lastmod: 2025-12-26T17:25:14+08:00
tags:
  - 计组原理
  - 处理器
  - 控制器
categories: 计组原理
publish: true
---

## 定义

1. 微命令：$控制部件 \xrightarrow{控制信号}执行部件$ の控制信号，控制序列最小单位
2. 微操作：微命令对应行为
3. 微指令 = 若干微命令
	1. 操作控制字段/微操作码字段：产生行为
	2. 顺序控制字段/微地址码字段：下一条指令位置
4. 微周期 = 微指令取指+操作所用时间，= $1\times$时钟周期
5. 控存 CM = 存微指令 の **ROM**
6. 微程序 = 一条指令由一个微程序实现

## 编码实现

### 操作码编码

1. 直接编码：一位 for 一个微操作
2. 字段直接编码：互斥操作 in 相同字段，相容操作 in 不同字段
	- 字段长度 = $\lceil \log_{2}(互斥微操作数+1) \rceil$
	- $+1$ 表示**无操作**，不要漏！
3. 字段间接编码：由一字段译码得出另一字段含义

### 地址码编码

1. 断定方式：指定下地址字段
2. 操作码生成
3. 增量计数器：$\mu$PC $\leftarrow$ ($\mu$PC) + 1

### 指令字编码

1. 水平型编码

```
[A1:A2:...:An:TestFlag:NxtAddr]
[   操作控制  :    顺序控制      ]
```

2. 垂直型编码

```
[muop :   Rd  : Rs ]
[操作码:目的地址:源地址]
```

| **编码方式**  | 水平型 | 垂直型 |
| --------- | --- | --- |
| 并行/效率/灵活性 | 高   | 低   |
| 微指令字长     | 长   | 短   |
| 微程序长      | 短   | 长   |
| 掌握难度      | 难   | 易   |

>[!info] 条件测试位
>已知有 $n$ 个互斥外部条件
>则微指令中 `条件测试位` 的位宽为 $\lceil \log_{2}(n+1) \rceil$
